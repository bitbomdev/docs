"use strict";(self.webpackChunkbitbom=self.webpackChunkbitbom||[]).push([[41],{8623:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>o,frontMatter:()=>d,metadata:()=>r,toc:()=>t});var i=s(4848),l=s(8453);const d={sidebar_position:1},a="Minefield CLI",r={id:"minefield-cli/usage",title:"Minefield CLI",description:"Query",source:"@site/docs/minefield-cli/usage.md",sourceDirName:"minefield-cli",slug:"/minefield-cli/usage",permalink:"/docs/minefield-cli/usage",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Minefield CLI",permalink:"/docs/category/minefield-cli"},next:{title:"Minefield Paper",permalink:"/docs/category/minefield-paper"}},c={},t=[{value:"Query",id:"query",level:2},{value:"Custom Queries",id:"custom-queries",level:3},{value:"Available Commands",id:"available-commands",level:4},{value:"dependencies",id:"dependencies",level:5},{value:"dependents",id:"dependents",level:5},{value:"and",id:"and",level:5},{value:"or",id:"or",level:5},{value:"xor",id:"xor",level:5},{value:"Examples",id:"examples",level:4},{value:"Flags",id:"flags",level:4},{value:"Output Query",id:"output-query",level:3},{value:"Usage",id:"usage",level:4},{value:"Examples",id:"examples-1",level:4},{value:"Flags",id:"flags-1",level:4},{value:"Globsearch",id:"globsearch",level:3},{value:"Usage",id:"usage-1",level:4},{value:"Examples",id:"examples-2",level:4},{value:"Leaderboard",id:"leaderboard",level:2},{value:"Custom Leaderboard",id:"custom-leaderboard",level:3},{value:"Usage",id:"usage-2",level:4},{value:"Examples",id:"examples-3",level:4},{value:"Flags",id:"flags-2",level:4},{value:"allKeys",id:"allkeys",level:3},{value:"Usage",id:"usage-3",level:4},{value:"Flags",id:"flags-3",level:4},{value:"Cache",id:"cache",level:2},{value:"Usage",id:"usage-4",level:3},{value:"Flags",id:"flags-4",level:3},{value:"Ingest",id:"ingest",level:2},{value:"SBOM",id:"sbom",level:3},{value:"Usage",id:"usage-5",level:4},{value:"OSV",id:"osv",level:3},{value:"Load",id:"load",level:4},{value:"Usage",id:"usage-6",level:4},{value:"Graph",id:"graph",level:4},{value:"Usage",id:"usage-7",level:4}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"minefield-cli",children:"Minefield CLI"})}),"\n",(0,i.jsx)(n.h2,{id:"query",children:"Query"}),"\n",(0,i.jsx)(n.h3,{id:"custom-queries",children:"Custom Queries"}),"\n",(0,i.jsx)(n.p,{children:"Custom queries allow users to perform complex searches by combining multiple commands. These queries can be used to analyze the relationships between different nodes in the graph."}),"\n",(0,i.jsx)(n.p,{children:"When running a custom query, there are multiple commands that can be used. For example, the custom command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'minefield query custom "dependencies library pkg:generic/dep1@1.0.0 and dependencies library pkg:generic/lib-A@1.0.0"\n'})}),"\n",(0,i.jsx)(n.p,{children:'This custom command uses the commands "dependencies" and "and".'}),"\n",(0,i.jsx)(n.h4,{id:"available-commands",children:"Available Commands"}),"\n",(0,i.jsx)(n.h5,{id:"dependencies",children:"dependencies"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Retrieves all dependencies of a specified node."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),": ",(0,i.jsx)(n.code,{children:"dependencies <node_type> <node_name>"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Example"}),": ",(0,i.jsx)(n.code,{children:"dependencies library pkg:generic/dep1@1.0.0"})]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"dependents",children:"dependents"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Retrieves all dependents of a specified node."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),": ",(0,i.jsx)(n.code,{children:"dependents <node_type> <node_name>"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Example"}),": ",(0,i.jsx)(n.code,{children:"dependents library pkg:generic/dep1@1.0.0"})]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"and",children:"and"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Combines two queries with a logical AND, returning nodes that satisfy both conditions."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),": ",(0,i.jsx)(n.code,{children:"<query1> and <query2>"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Example"}),": ",(0,i.jsx)(n.code,{children:"dependencies library pkg:generic/dep1@1.0.0 and dependencies library pkg:generic/lib-A@1.0.0"})]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"or",children:"or"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Combines two queries with a logical OR, returning nodes that satisfy either condition."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),": ",(0,i.jsx)(n.code,{children:"<query1> or <query2>"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Example"}),": ",(0,i.jsx)(n.code,{children:"dependencies library pkg:generic/dep1@1.0.0 or dependencies library pkg:generic/lib-A@1.0.0"})]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"xor",children:"xor"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Combines two queries with a logical XOR, returning nodes that satisfy one condition but not both."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),": ",(0,i.jsx)(n.code,{children:"<query1> xor <query2>"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Example"}),": ",(0,i.jsx)(n.code,{children:"dependencies library pkg:generic/dep1@1.0.0 xor dependencies library pkg:generic/lib-A@1.0.0"})]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"examples",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["To find the dependencies shared by ",(0,i.jsx)(n.code,{children:"dep1"})," and ",(0,i.jsx)(n.code,{children:"lib-A"}),", you can use the following custom query:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'minefield query "dependencies library pkg:generic/dep1@1.0.0 and dependencies library pkg:generic/lib-A@1.0.0"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This query will return all nodes that are dependencies of both ",(0,i.jsx)(n.code,{children:"dep1"})," and ",(0,i.jsx)(n.code,{children:"lib-A"}),"."]}),"\n",(0,i.jsx)(n.h4,{id:"flags",children:"Flags"}),"\n",(0,i.jsx)(n.p,{children:"--visualize : This flag will visualize the query, by creating a graph of the nodes and edges."}),"\n",(0,i.jsx)(n.p,{children:"--addr : This flag will specify the port that the visualization will be hosted on."}),"\n",(0,i.jsx)(n.p,{children:"--max-output: This flag will specify the maximum number of nodes that the query will return."}),"\n",(0,i.jsx)(n.h3,{id:"output-query",children:"Output Query"}),"\n",(0,i.jsx)(n.p,{children:"Output is takes in a node name, and will output the metadata of the node to the terminal or to a file if the --outputdir flag is specified."}),"\n",(0,i.jsx)(n.h4,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"minefield query output <node_name>\n"})}),"\n",(0,i.jsx)(n.h4,{id:"examples-1",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["To output the metadata of the node ",(0,i.jsx)(n.code,{children:"pkg:generic/dep1@1.0.0"}),", you can use the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"minefield query output pkg:generic/dep1@1.0.0\n"})}),"\n",(0,i.jsx)(n.p,{children:"This will output the node's name, id, type, and metadata."}),"\n",(0,i.jsx)(n.h4,{id:"flags-1",children:"Flags"}),"\n",(0,i.jsx)(n.p,{children:"--output-file: This flag will specify the file that output will be saved to."}),"\n",(0,i.jsx)(n.h3,{id:"globsearch",children:"Globsearch"}),"\n",(0,i.jsx)(n.p,{children:"The globsearch command is used to search for nodes in the graph that match a given pattern. We can run this query without the cache command, without any impact on performance."}),"\n",(0,i.jsx)(n.h4,{id:"usage-1",children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"minefield query globsearch <pattern>\n"})}),"\n",(0,i.jsx)(n.h4,{id:"examples-2",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["To search for all the noes for the package ",(0,i.jsx)(n.code,{children:"dep"})," you can run ",(0,i.jsx)(n.code,{children:"*dep*"})," with the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'minefield query globsearch "*dep*"  \n'})}),"\n",(0,i.jsx)(n.p,{children:"The pattern is a glob pattern, and will match any node that contains the pattern."}),"\n",(0,i.jsx)(n.h2,{id:"leaderboard",children:"Leaderboard"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"leaderboard"})," command is used to generate a leaderboard of nodes based on a specified query, sorted by the number of nodes returned by the query."]}),"\n",(0,i.jsx)(n.h3,{id:"custom-leaderboard",children:"Custom Leaderboard"}),"\n",(0,i.jsxs)(n.p,{children:["To create a custom leaderboard, you can use the ",(0,i.jsx)(n.code,{children:"leaderboard custom"})," command."]}),"\n",(0,i.jsx)(n.h4,{id:"usage-2",children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"minefield leaderboard custom <query>\n"})}),"\n",(0,i.jsx)(n.h4,{id:"examples-3",children:"Examples"}),"\n",(0,i.jsx)(n.p,{children:"To create a leaderboard of based on there dependents, you can use the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'minefield leaderboard custom "dependents library"\n'})}),"\n",(0,i.jsx)(n.p,{children:"This will generate a leaderboard of nodes based on the number of dependents they have."}),"\n",(0,i.jsx)(n.p,{children:"We can also sort by the number of circular dependencies a node has."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'minefield leaderboard custom "dependents library and depedencies library"\n'})}),"\n",(0,i.jsx)(n.p,{children:"if a node has dependents that are also dependencies, they will pop up on this query, and we will be sorting by the length of the output of the query."}),"\n",(0,i.jsx)(n.p,{children:"As you can see, this command differs from the 'query' command's script, since we do not a node. This is because we are running this query on every single node, and then sorting them by the length of the output of the query."}),"\n",(0,i.jsx)(n.p,{children:"This command can only be run after running the cache ."}),"\n",(0,i.jsx)(n.h4,{id:"flags-2",children:"Flags"}),"\n",(0,i.jsx)(n.p,{children:"--max-output: This flag will specify the maximum number of nodes that the query will return."}),"\n",(0,i.jsx)(n.p,{children:"--concurrency: This flag will specify the number of concurrent queries that the leaderboard will run, this is useful for speeding up the query."}),"\n",(0,i.jsx)(n.p,{children:"--all: shows the queries for each node, instead of the size of the output."}),"\n",(0,i.jsx)(n.h3,{id:"allkeys",children:"allKeys"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"allKeys"})," command is used to generate a list of all the keys in the graph. This does not need the cache command to be run first, since allKeys does not sort by any value, it just returns all the keys in the graph."]}),"\n",(0,i.jsx)(n.h4,{id:"usage-3",children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"minefield leaderboard allKeys\n"})}),"\n",(0,i.jsx)(n.h4,{id:"flags-3",children:"Flags"}),"\n",(0,i.jsx)(n.p,{children:"--max-output: This flag will specify the maximum number of nodes that the query will return."}),"\n",(0,i.jsx)(n.h2,{id:"cache",children:"Cache"}),"\n",(0,i.jsx)(n.h3,{id:"usage-4",children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"minefield cache\n"})}),"\n",(0,i.jsx)(n.h3,{id:"flags-4",children:"Flags"}),"\n",(0,i.jsx)(n.p,{children:"--clear : This flag will clear the cache, removing all cached, but leaving the graph unchanged."}),"\n",(0,i.jsx)(n.h2,{id:"ingest",children:"Ingest"}),"\n",(0,i.jsx)(n.h3,{id:"sbom",children:"SBOM"}),"\n",(0,i.jsx)(n.h4,{id:"usage-5",children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"minefield ingest sbom <sbom_file or directory>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"osv",children:"OSV"}),"\n",(0,i.jsx)(n.h4,{id:"load",children:"Load"}),"\n",(0,i.jsx)(n.p,{children:"This command will load the OSV data into a local database without graphing it.\nTHe data must be in the OSV JSON schema, but it can be in a directory, a single file, or a zip file."}),"\n",(0,i.jsx)(n.h4,{id:"usage-6",children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"minefield ingest osv load <osv_file or directory>\n"})}),"\n",(0,i.jsx)(n.h4,{id:"graph",children:"Graph"}),"\n",(0,i.jsx)(n.p,{children:"This command will load the OSV data into the graph, from the local database."}),"\n",(0,i.jsx)(n.h4,{id:"usage-7",children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"minefield ingest osv graph\n"})})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>r});var i=s(6540);const l={},d=i.createContext(l);function a(e){const n=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);