<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-blog" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Why We Use Participle? | Bitbom</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://bitbom.dev/blog/using-participle/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Why We Use Participle? | Bitbom"><meta data-rh="true" name="description" content="Learn why we chose Participle and Roaring Bitmaps over GraphQL for our project."><meta data-rh="true" property="og:description" content="Learn why we chose Participle and Roaring Bitmaps over GraphQL for our project."><meta data-rh="true" property="og:image" content="https://bitbom.dev/img/blog/using-participle/participle-graph.png"><meta data-rh="true" name="twitter:image" content="https://bitbom.dev/img/blog/using-participle/participle-graph.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-09-12T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/neilnaveen,https://github.com/naveensrinivasan"><meta data-rh="true" property="article:tag" content="Participle,Roaring Bitmaps,GraphQL,SBOM,dependency graphs,Minefield"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://bitbom.dev/blog/using-participle/"><link data-rh="true" rel="alternate" href="https://bitbom.dev/blog/using-participle/" hreflang="en"><link data-rh="true" rel="alternate" href="https://bitbom.dev/blog/using-participle/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://XVADXTT1S0-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://bitbom.dev/blog/using-participle","mainEntityOfPage":"https://bitbom.dev/blog/using-participle","url":"https://bitbom.dev/blog/using-participle","headline":"Why We Use Participle?","name":"Why We Use Participle?","description":"Learn why we chose Participle and Roaring Bitmaps over GraphQL for our project.","datePublished":"2024-09-12T00:00:00.000Z","author":[{"@type":"Person","name":"Neil Naveen","description":"bitbom and OpenSSF Maintainer","url":"https://github.com/neilnaveen","image":"https://github.com/neilnaveen.png"},{"@type":"Person","name":"Naveen Srinivasan","description":"bitbom and OpenSSF Maintainer","url":"https://github.com/naveensrinivasan","image":"https://github.com/naveensrinivasan.png"}],"image":{"@type":"ImageObject","@id":"https://bitbom.dev/img/blog/using-participle/participle-graph.png","url":"https://bitbom.dev/img/blog/using-participle/participle-graph.png","contentUrl":"https://bitbom.dev/img/blog/using-participle/participle-graph.png","caption":"title image for the blog post: Why We Use Participle?"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://bitbom.dev/blog","name":"Blog"}}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-36YSGXLQZ7"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-36YSGXLQZ7",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Bitbom" href="/opensearch.xml">

<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Bitbom RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Bitbom Atom Feed"><link rel="stylesheet" href="/assets/css/styles.bac54505.css">
<script src="/assets/js/runtime~main.a59e2095.js" defer="defer"></script>
<script src="/assets/js/main.a827425a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">ðŸŽ‰ We just released <a href="https://github.com/bitbomdev/minefield" target="_blank">Minefield</a> ðŸŽ‰</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/bitbomLogoBig.png" alt="BitBom Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/bitbomLogoBig.png" alt="BitBom Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">BitBom</b></a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/demos/starting-up-minefield/">Demos</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">Blog</a><a class="navbar__item navbar__link" href="/glossary/">Glossary</a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbar__items navbar__items--right"><div class="wrapper_drp3"><div><span><a href="https://github.com/bitbomdev/minefield" data-color-scheme="no-preference: light; light: light; dark: light;" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star https://github.com/bitbomdev/minefield on GitHub">Star</a></span></div></div><div class="ctaWrapper_BTEV"><div><a class="button button--outline" href="/demos/starting-up-minefield/">Get Started</a>Â Â <a href="https://github.com/bitbomdev/minefield" target="_blank" rel="noopener noreferrer" class="button button--accent">View on GitHub</a></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><main><article class="container margin-vert--lg"><div class="row"><div class="col col--3"><div><div style="font-size:28px">Recent posts</div><div><a style="margin-top:20px" class="button button--outline" href="/blog/">View Recent posts</a></div></div></div><div class="col col--7"><header class="card__header"><h1 class="title_xvU1">Why We Use Participle?</h1><div class="imageOnlyAuthorRow_lXe7"><div><div class="avatar"><a href="https://github.com/neilnaveen" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/neilnaveen.png" alt="Neil Naveen"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/neilnaveen" target="_blank" rel="noopener noreferrer"><span>Neil Naveen</span></a></div><small class="avatar__subtitle">bitbom and OpenSSF Maintainer</small></div></div></div><div><div class="avatar"><a href="https://github.com/naveensrinivasan" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/naveensrinivasan.png" alt="Naveen Srinivasan"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/naveensrinivasan" target="_blank" rel="noopener noreferrer"><span>Naveen Srinivasan</span></a></div><small class="avatar__subtitle">bitbom and OpenSSF Maintainer</small></div></div></div></div><div class="container_iJTo"><time datetime="2024-09-12T00:00:00.000Z">September 12, 2024</time> Â· <!-- -->6 min read</div></header><div id="__blog-post-container" class="markdown card__body"><p><img decoding="async" loading="lazy" alt="caged-floating-island" src="/assets/images/participle-graph-c9f9ed5fdf9f452f10e192fe9a0af796.png" width="1456" height="816" class="img_ev3q"></p>
<p>We chose Participle and Roaring Bitmaps over GraphQL. Here&#x27;s why.</p>
<hr>
<p><strong>TLDR:</strong> We had to make a crucial decision when developing <strong>Minefield</strong>, our tool for analyzing Software Bill of Materials (SBOMs) and their dependency graphs. Initially, we considered using <strong>GraphQL</strong> to query the intricate relationships between dependencies, dependents, and other relationships. However, as we delved deeper, it became evident that GraphQL wasnâ€™t the ideal solution for our requirements, which included efficient, expressive, and high-performance querying on large, complex datasets.
Thatâ€™s when we opted to create a <strong>custom Domain-Specific Language (DSL)</strong> using <strong>Participle</strong>, a parsing library in Golang, and to enhance its performance, we backed it with <strong>Roaring Bitmaps</strong>.</p>
<p>In this article, we will explore the reasons behind this decision and explain how it can help you tackle complex querying problems in your projects.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-attraction-of-graphql">The Attraction of GraphQL:<a href="#the-attraction-of-graphql" class="hash-link" aria-label="Direct link to The Attraction of GraphQL:" title="Direct link to The Attraction of GraphQL:">â€‹</a></h2>
<p>Our Initial Consideration is GraphQL, a formidable tool that offers flexibility, is driven by schemas, and is widely adopted in the development community. Initially, it appeared to be the perfect fit for querying Minefieldâ€™s dependency graphs.
It allowed us to:</p>
<ul>
<li><strong>Retrieve only the necessary data</strong>, thereby reducing over-fetching commonly found in REST APIs.</li>
<li><strong>Utilize a robust schema</strong>, which defines the structure of the data, making it simple to work with and validate queries.</li>
<li><strong>Leverage a vast ecosystem</strong> equipped with tools for clients, servers, and documentation.</li>
</ul>
<p>Nevertheless, as we started experimenting, we encountered critical obstacles that led us to reconsider using GraphQL as a solution for querying SBOMs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-graphql-fell-short-for-complex-dependency-graphs">Why GraphQL Fell Short for Complex Dependency Graphs<a href="#why-graphql-fell-short-for-complex-dependency-graphs" class="hash-link" aria-label="Direct link to Why GraphQL Fell Short for Complex Dependency Graphs" title="Direct link to Why GraphQL Fell Short for Complex Dependency Graphs">â€‹</a></h2>
<ol>
<li>
<p><strong>Nested Relationships are Cumbersome</strong><br>
<!-- -->Dependency graphs are often deeply nested. You have to track which packages a library depends on and the entire chain of dependencies that follow. Writing deeply nested queries in GraphQL quickly became unwieldy and hard to manage.</p>
</li>
<li>
<p><strong>Complex Set-Based Operations</strong><br>
<!-- -->GraphQL is great for fetching specific pieces of data, but it wasn&#x27;t designed for complex set-based operations like intersections, unions, or complements. When dealing with millions of dependencies, performing these operations is crucial for answering questions like &quot;Which dependencies are affected by this vulnerability but not by others?&quot;</p>
</li>
<li>
<p><strong>Performance Bottlenecks</strong><br>
<!-- -->As the dataset grew, performance became a concern. Querying large, complex graphs using GraphQL created a lot of overhead that slowed execution, especially when we needed to perform set-based operations on large lists of dependencies and vulnerabilities.</p>
</li>
</ol>
<hr>
<p>We recognized the need for a tailored solution to query complex dependency graphs efficiently.</p>
<p>To address this, we developed a <strong>custom DSL</strong> using <strong>Participle</strong>, a Golang parsing library that enabled us to define our own query language grammar with ease.</p>
<p>Our DSL empowers us to construct potent, expressive queries that are simple to compose and execute efficiently.</p>
<p>For instance, consider this straightforward example: <code>dsl (dependencies library pkg:golang/net and not (dependents library pkg:golang/example)) </code>
This query identifies all libraries dependent on <code>golang/net</code> but not relied upon by <code>golang/example</code>.</p>
<p>Expressing such nuanced queries clearly in GraphQL was challenging, but our DSL effortlessly managed this task.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-participle">Why Participle?<a href="#why-participle" class="hash-link" aria-label="Direct link to Why Participle?" title="Direct link to Why Participle?">â€‹</a></h3>
<ol>
<li>
<p><strong>Native to Go</strong><br>
<!-- -->We wanted something that felt natural for Go developers. We defined our query language with Participle using Go structs, making the DSL intuitive and type-safe.</p>
<p>Example grammar definition:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> Expression </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Left     Term   @@</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Operator </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> @</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;and&quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;or&quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;xor&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Right    </span><span class="token operator">*</span><span class="token plain">Expression @@?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Strong Typing</strong><br>
<!-- -->Leveraging Go&#x27;s type system allowed us to create a robust DSL that&#x27;s easy to extend and maintain. Adding new query operators or types is as simple as defining new Go structs and adding them to the parser.</p>
</li>
<li>
<p><strong>Extensibility and Performance</strong><br>
<!-- -->Since we controlled the language&#x27;s design, we could optimize it for exactly what we needed. With Participle, building a DSL that supports nested queries, conditional logic, and complex operations like set intersections was easy.</p>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roaring-bitmaps-supercharging-query-performance">Roaring Bitmaps: Supercharging Query Performance<a href="#roaring-bitmaps-supercharging-query-performance" class="hash-link" aria-label="Direct link to Roaring Bitmaps: Supercharging Query Performance" title="Direct link to Roaring Bitmaps: Supercharging Query Performance">â€‹</a></h2>
<p>Once Participle parses the queries, we apply them using Roaring Bitmaps, a data structure specifically designed for fast set operations. This was a key advantage over GraphQL, which doesn&#x27;t natively support efficient set-based operations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-roaring-bitmaps">Why Roaring Bitmaps?<a href="#why-roaring-bitmaps" class="hash-link" aria-label="Direct link to Why Roaring Bitmaps?" title="Direct link to Why Roaring Bitmaps?">â€‹</a></h3>
<p>Roaring Bitmaps are perfect for <strong>large-scale datasets</strong> like dependency graphs. They allow us to perform operations like <strong>AND</strong>, <strong>OR</strong>, and <strong>XOR</strong> on massive lists of dependencies in milliseconds, without sacrificing memory efficiency.</p>
<p>Here&#x27;s how we evaluate a parsed query using Roaring Bitmaps:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">evaluateExpression</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">expr </span><span class="token operator">*</span><span class="token plain">Expression</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">roaring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Bitmap </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    left </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">evaluateTerm</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">expr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Left</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> expr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Operator </span><span class="token operator">==</span><span class="token plain"> </span><span class="token boolean">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> left</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    right </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">evaluateExpression</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">expr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Right</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">switch</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">expr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Operator </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;and&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> roaring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">And</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">left</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;or&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> roaring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Or</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">left</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;xor&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> roaring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Xor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">left</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token boolean">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This allows us to calculate query results quickly and efficiently, even when dealing with millions of dependencies and vulnerabilities.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="real-world-use-case-vulnerability-analysis-at-scale">Real-World Use Case: Vulnerability Analysis at Scale<a href="#real-world-use-case-vulnerability-analysis-at-scale" class="hash-link" aria-label="Direct link to Real-World Use Case: Vulnerability Analysis at Scale" title="Direct link to Real-World Use Case: Vulnerability Analysis at Scale">â€‹</a></h2>
<p>Hereâ€™s an example of a real-world query you can run in Minefield using our DSL:</p>
<div class="language-dsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">(dependents vulns CVE-2023-12345 and not dependencies library pkg:golang/patchedlib)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This query finds all dependents affected by a vulnerability (<code>CVE-2023-12345</code>) that havenâ€™t yet patched the issue by using a specific library (<code>golang/patchedlib</code>).</p>
<p>In a GraphQL world, expressing this kind of query would be cumbersome, and executing it would be slow due to the overhead of navigating through layers of nested data. With our custom DSL and Roaring Bitmaps, however, it runs quicklyâ€”even on large datasets.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion-choosing-the-right-tool-for-the-job">Conclusion: Choosing the Right Tool for the Job<a href="#conclusion-choosing-the-right-tool-for-the-job" class="hash-link" aria-label="Direct link to Conclusion: Choosing the Right Tool for the Job" title="Direct link to Conclusion: Choosing the Right Tool for the Job">â€‹</a></h2>
<p>GraphQL is an incredibly useful tool for many use cases, but it wasnâ€™t the right fit for Minefieldâ€™s complex dependency graph queries. By using <strong>Participle</strong> to build a custom DSL and <strong>Roaring Bitmaps</strong> to optimize query performance, we created a solution thatâ€™s both <strong>expressive</strong> and <strong>blazingly fast</strong>.</p>
<p>The takeaway? Always choose the right tool for the problem youâ€™re solving. When you need something more tailored, building a custom solution can save you a lot of headaches down the roadâ€”especially when working with large, complex datasets.</p>
<p>If youâ€™re interested in digging deeper into how we built Minefieldâ€™s custom DSL or have your own experiences with dependency analysis, check out our <a href="https://github.com/bitbomdev/minefield" target="_blank" rel="noopener noreferrer">GitHub repository</a> and let us know what you think!</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/participle/">Participle</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/roaring-bitmaps/">Roaring Bitmaps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/graph-ql/">GraphQL</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/sbom/">SBOM</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/dependency-graphs/">dependency graphs</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/minefield/">Minefield</a></li></ul></div></div><div class="card margin-top--lg"><div class="card__body"><h3>Share Your Thoughts</h3><p>Have thoughts or comments about this <!-- -->blog<!-- -->? Start a discussion on GitHub!</p><a href="https://github.com/bitbomdev/docs/issues/new?title=Blog%20Feedback%3A%20Why%20We%20Use%20Participle%3F&amp;body=Feedback%20for%20blog%3A%20**Why%20We%20Use%20Participle%3F**" target="_blank" rel="noopener noreferrer" class="button button--primary">Create GitHub Issue</a></div></div></footer></div><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-attraction-of-graphql" class="table-of-contents__link toc-highlight">The Attraction of GraphQL:</a></li><li><a href="#why-graphql-fell-short-for-complex-dependency-graphs" class="table-of-contents__link toc-highlight">Why GraphQL Fell Short for Complex Dependency Graphs</a><ul><li><a href="#why-participle" class="table-of-contents__link toc-highlight">Why Participle?</a></li></ul></li><li><a href="#roaring-bitmaps-supercharging-query-performance" class="table-of-contents__link toc-highlight">Roaring Bitmaps: Supercharging Query Performance</a><ul><li><a href="#why-roaring-bitmaps" class="table-of-contents__link toc-highlight">Why Roaring Bitmaps?</a></li></ul></li><li><a href="#real-world-use-case-vulnerability-analysis-at-scale" class="table-of-contents__link toc-highlight">Real-World Use Case: Vulnerability Analysis at Scale</a></li><li><a href="#conclusion-choosing-the-right-tool-for-the-job" class="table-of-contents__link toc-highlight">Conclusion: Choosing the Right Tool for the Job</a></li></ul></div></div></div></article></main><nav class="container margin-vert--lg" aria-label="Blog post page navigation"><div class="row"><div class="col col--3"></div><div class="row col col--7"><div class="col"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/Air-Gapped-Vulnerability/"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">How Minefield Enables Air-Gapped SBOM Vulnerability Graphing Like Git&#x27;s Disconnected Mode</div></a></div><div class="col"></div></div></div></nav></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/#getting-started">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/">Architecture</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/minefield-paper/">Minefield Paper</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/bitbomdev/minefield" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/roadmap/">Roadmap</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><img src="/img/Bitbom-long-white-logo.png" class="footer-logo"><br>Copyright Â© 2024 bitbomdev, Inc.<br>Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>